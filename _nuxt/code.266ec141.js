import{_ as N}from"./layout.218b83be.js";import{x as k,a as S,y as B,r as f,c as E,w as p,l as h,o as u,e as t,f as o,z as v,u as m,k as w,A as g,E as x,p as I,b as A}from"./entry.901372f0.js";import{_ as V}from"./delete.29df2ba8.js";const y="http://wasupstudionobullying.com/wasupstudio/api/license",U=async()=>await k.get(`${y}`),j=async(i,l)=>await k.put(`${y}/${i}`,l);const a=i=>(I("data-v-bffd68c6"),i=i(),A(),i),z={class:"manage"},H={class:"manage-between"},K=a(()=>t("div",{class:"manage-head"},"註冊碼管理",-1)),L={class:"manage-row"},O=a(()=>t("div",{class:"manage-num"},"項目數量：10",-1)),q={class:"Mtable"},F={class:"Mtable-row"},G={class:"Mtable-icon-outer"},J=["onClick"],P={key:0,class:"popup"},Q=a(()=>t("div",{class:"title"},"新增註冊碼",-1)),R=a(()=>t("div",{class:"item-title"},"註冊碼數量",-1)),T=a(()=>t("div",null,[t("input",{class:"input",placeholder:"請輸入數量",type:"text"})],-1)),W=a(()=>t("div",{class:"btn-green"},"儲存",-1)),X=[Q,R,T,W],Y={key:1,class:"popup"},Z=a(()=>t("div",{class:"title"},"刪除提醒",-1)),tt=a(()=>t("div",{class:"box-hint"},"註冊碼刪除後將無法復原，您確認要刪除？",-1)),et={class:"box-row"},st={__name:"code",setup(i){const l=B([]);async function b(){l.length=0;const{data:r}=await U();let e=r.value.data.list;e=e.filter(s=>s.activated!==2),l.push(...e),console.log("allData",l)}b();const _=f(!1),n=f(!1),d={};function C(r){n.value=!0;let e=l.filter(s=>s.id==r)[0];Object.assign(d,e)}function $(){n.value=!1,d.activated=2,j(d.id,d).catch(()=>{x.error("刪除失敗")}).then(()=>{x({message:"刪除成功",type:"success"}),b()})}return(r,e)=>{const s=h("el-table-column"),D=h("el-table"),M=N;return u(),E(M,{name:"custom"},{default:p(()=>[t("div",z,[t("div",H,[K,t("div",L,[O,t("div",{onClick:e[0]||(e[0]=c=>_.value=!0),class:"manage-create"},"+ 新增註冊碼")])]),t("div",q,[o(D,{data:m(l),style:{width:"100%"}},{default:p(()=>[o(s,{prop:"licenseKey",label:"註冊碼",sortable:"","min-width":"160"}),o(s,{prop:"customerEmail",label:"綁定使用者帳號",sortable:"","min-width":"160"}),o(s,{prop:"customerName",label:"使用者名稱",sortable:"","min-width":"160"}),o(s,{prop:"generateＦ",label:"生成方式",sortable:"","min-width":"160"}),o(s,{prop:"activationDate",label:"使用時間",sortable:"","min-width":"160"}),o(s,{prop:"expirationDate",label:"產生時間",sortable:"","min-width":"160"}),o(s,{label:"操作",sortable:"","min-width":"260"},{default:p(c=>[t("div",F,[t("div",G,[t("img",{onClick:v(ot=>C(c.row.id),["stop"]),class:"Mtable-icon",src:V,alt:"close"},null,8,J)])])]),_:1})]),_:1},8,["data"])]),m(_)?(u(),w("div",P,[t("div",{onClick:e[2]||(e[2]=c=>_.value=!1),class:"box"},[t("div",{onClick:e[1]||(e[1]=v(()=>{},["stop"])),class:"block-box"},X)])])):g("",!0),m(n)?(u(),w("div",Y,[t("div",{onClick:e[5]||(e[5]=c=>n.value=!1),class:"box"},[t("div",{onClick:e[4]||(e[4]=v(()=>{},["stop"])),class:"block-box"},[Z,tt,t("div",et,[t("div",{onClick:e[3]||(e[3]=c=>n.value=!1),class:"box-cancel"},"取消"),t("div",{onClick:$,class:"box-delete"},"刪除")])])])])):g("",!0)])]),_:1})}}},nt=S(st,[["__scopeId","data-v-bffd68c6"]]);export{nt as default};
