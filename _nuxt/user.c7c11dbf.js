import{_ as E}from"./layout.1cb4884a.js";import{a as T,y as S,G as O,r as y,c as R,w as m,l as Y,o as b,e,f as d,h as q,H as G,z as _,u as l,k as g,A as x,q as c,v as w,I as k,J,E as h,p as L,b as F}from"./entry.467f29c8.js";import{u as K}from"./dayjs.0a875775.js";import{_ as P}from"./edit.b944415b.js";import{_ as Q}from"./delete.c8420faf.js";import{a as W,e as I}from"./member.b1f34670.js";const s=v=>(L("data-v-f769932b"),v=v(),F(),v),X={class:"manage"},Z=s(()=>e("div",{class:"manage-between"},[e("div",{class:"manage-head"},"使用者管理")],-1)),ee={class:"Mtable"},te={class:"Mtable-row"},se={class:"Mtable-icon-outer"},oe=["onClick"],ie={class:"Mtable-icon-outer"},le=["onClick"],ae={key:0,class:"popup"},ne=s(()=>e("div",{class:"title"},"新增資料",-1)),de=s(()=>e("div",{class:"item-title"},"*帳號",-1)),re=s(()=>e("div",null,[e("input",{class:"input",placeholder:"請輸入姓名",type:"text"})],-1)),ce=s(()=>e("div",{class:"item-title"},"*性別",-1)),pe=s(()=>e("div",{class:"radio-box"},[e("div",{class:"radio-item"},[e("input",{class:"radio-point",type:"radio",id:"male",name:"drone",value:"male",checked:""}),e("label",{for:"male"},"男性")]),e("div",{class:"radio-item"},[e("input",{class:"radio-point",type:"radio",id:"female",name:"drone",value:"female"}),e("label",{for:"female"},"女性")]),e("div",{class:"radio-item"},[e("input",{class:"radio-point",type:"radio",id:"intersex",name:"drone",value:"intersex"}),e("label",{for:"intersex"},"中性")])],-1)),ue=s(()=>e("div",{class:"item-title"},"*生日",-1)),_e=s(()=>e("div",null,[e("input",{class:"input",type:"date"})],-1)),ve=s(()=>e("div",{class:"item-title"},"機構",-1)),me=s(()=>e("div",null,[e("input",{class:"input",placeholder:"請輸入機構名稱",type:"text"})],-1)),be=s(()=>e("div",{class:"item-title"},"機構類別",-1)),he=s(()=>e("div",{class:"select-container"},[e("select",{class:"select"},[e("option",{value:""},"請選擇"),e("option",{value:"volvo"},"Volvo"),e("option",{value:"saab"},"Saab"),e("option",{value:"mercedes"},"Mercedes"),e("option",{value:"audi"},"Audi")])],-1)),fe=s(()=>e("div",{class:"btn-green"},"儲存",-1)),ye=[ne,de,re,ce,pe,ue,_e,ve,me,be,he,fe],ge={key:1,class:"popup"},xe=s(()=>e("div",{class:"title"},"編輯資料",-1)),we=s(()=>e("div",{class:"item-title"},"*帳號",-1)),ke=s(()=>e("div",{class:"item-title"},"*性別",-1)),Ce={class:"radio-box"},Me={class:"radio-item"},De=s(()=>e("label",{for:"male"},"男性",-1)),Ue={class:"radio-item"},Ve=s(()=>e("label",{for:"female"},"女性",-1)),Se={class:"radio-item"},Ye=s(()=>e("label",{for:"intersex"},"中性",-1)),Ie=s(()=>e("div",{class:"item-title"},"*生日",-1)),Ae=s(()=>e("div",{class:"item-title"},"機構",-1)),$e=s(()=>e("div",{class:"item-title"},"機構類別",-1)),Be={class:"select-container"},He=s(()=>e("option",{value:""},"請選擇",-1)),Ne=s(()=>e("option",{value:"學校"},"學校",-1)),je=s(()=>e("option",{value:"補習班"},"補習班",-1)),ze=s(()=>e("option",{value:"政府機關"},"政府機關",-1)),Ee=[He,Ne,je,ze],Te={key:2,class:"popup"},Oe=s(()=>e("div",{class:"title"},"刪除提醒",-1)),Re=s(()=>e("div",{class:"box-hint"},"帳號刪除後將無法復原，您確認要刪除？",-1)),qe={class:"box-row"},Ge={__name:"user",async setup(v){let C,M,r=S([]);async function f(){r.length=0;let{data:n}=await W(),t=n.value.data.list;t=t.filter(a=>a.status==1),r.push(...t),r.map(a=>a.birthday=a.birthday.split(" ")[0]),console.log("user allData",r)}[C,M]=O(()=>f()),await C,M();const A={0:"女",1:"男",2:"中性"},D=y(!1),p=y(!1),u=y(!1),U=K(),o=S({});function V(n){let t=r.filter(a=>a.id==n)[0];t.birthday=t.birthday.split(" ")[0],Object.assign(o,t),p.value=!0}function $(){o.birthday=U(o.birthday).format("YYYY-MM-DD HH:mm:ss"),I(o.id,o).then(n=>{console.log("res",n),h({message:n.data.value.data,type:"success"}),f(),p.value=!1}).catch(()=>{h.error("儲存失敗")})}function B(n){p.value=!1,u.value=!0;let t=r.filter(a=>a.id==n)[0];Object.assign(o,t)}function H(){u.value=!1,o.status=2,o.birthday=U(o.birthday).format("YYYY-MM-DD HH:mm:ss"),I(o.id,o).then(n=>{h({message:"刪除成功",type:"success"}),f()}).catch(()=>{h.error("刪除失敗")})}return(n,t)=>{const a=Y("el-table-column"),N=Y("el-table"),j=E;return b(),R(j,{name:"custom"},{default:m(()=>[e("div",X,[Z,e("div",ee,[d(N,{data:l(r),onRowClick:V,style:{width:"100%"}},{default:m(()=>[d(a,{prop:"email",label:"帳號",sortable:"","min-width":"160"}),d(a,{prop:"name",label:"姓名",sortable:"","min-width":"160"}),d(a,{label:"性別",sortable:"","min-width":"160"},{default:m(i=>[q(G(A[i.row.gender]),1)]),_:1}),d(a,{prop:"birthday",label:"生日",sortable:"","min-width":"160"}),d(a,{prop:"organization",label:"機構",sortable:"","min-width":"160"}),d(a,{prop:"category",label:"機構類別",sortable:"","min-width":"160"}),d(a,{prop:"registionTime",label:"註冊時間",sortable:"","min-width":"160"}),d(a,{label:"操作",sortable:"","min-width":"260"},{default:m(i=>[e("div",te,[e("div",se,[e("img",{onClick:_(z=>V(i.row.id),["stop"]),class:"Mtable-icon",src:P,alt:"close"},null,8,oe)]),e("div",ie,[e("img",{onClick:_(z=>B(i.row.id),["stop"]),class:"Mtable-icon",src:Q,alt:"close"},null,8,le)])])]),_:1})]),_:1},8,["data"])]),l(D)?(b(),g("div",ae,[e("div",{onClick:t[1]||(t[1]=i=>D.value=!1),class:"box"},[e("div",{onClick:t[0]||(t[0]=_(()=>{},["stop"])),class:"block-box"},ye)])])):x("",!0),l(p)?(b(),g("div",ge,[e("div",{onClick:t[10]||(t[10]=i=>p.value=!1),class:"box"},[e("div",{onClick:t[9]||(t[9]=_(()=>{},["stop"])),class:"block-box"},[xe,we,e("div",null,[c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>l(o).email=i),class:"input",placeholder:"請輸入姓名",type:"text"},null,512),[[w,l(o).email]])]),ke,e("div",Ce,[e("div",Me,[c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>l(o).gender=i),class:"radio-point",type:"radio",id:"male",name:"drone",value:1,checked:""},null,512),[[k,l(o).gender]]),De]),e("div",Ue,[c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>l(o).gender=i),class:"radio-point",type:"radio",id:"female",name:"drone",value:0},null,512),[[k,l(o).gender]]),Ve]),e("div",Se,[c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>l(o).gender=i),class:"radio-point",type:"radio",id:"intersex",name:"drone",value:2},null,512),[[k,l(o).gender]]),Ye])]),Ie,e("div",null,[c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>l(o).birthday=i),class:"input",type:"date"},null,512),[[w,l(o).birthday]])]),Ae,e("div",null,[c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=i=>l(o).organization=i),class:"input",placeholder:"請輸入機構名稱",type:"text"},null,512),[[w,l(o).organization]])]),$e,e("div",Be,[c(e("select",{"onUpdate:modelValue":t[8]||(t[8]=i=>l(o).category=i),class:"select"},Ee,512),[[J,l(o).category]])]),e("div",{onClick:$,class:"btn-green"},"儲存")])])])):x("",!0),l(u)?(b(),g("div",Te,[e("div",{onClick:t[13]||(t[13]=i=>u.value=!1),class:"box"},[e("div",{onClick:t[12]||(t[12]=_(()=>{},["stop"])),class:"block-box"},[Oe,Re,e("div",qe,[e("div",{onClick:t[11]||(t[11]=i=>u.value=!1),class:"box-cancel"},"取消"),e("div",{onClick:H,class:"box-delete"},"刪除")])])])])):x("",!0)])]),_:1})}}},We=T(Ge,[["__scopeId","data-v-f769932b"]]);export{We as default};
